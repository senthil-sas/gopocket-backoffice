import{u as T,o as c,K as Q,H as V,T as G,t as A,b as W,N,a as p}from"./use-resolve-button-type-e886095c.js";import{x as J,b as g,F as X,w as Y,h as Z,c as ee,p as te,a as ae,u as le,O as oe,l as j}from"./use-text-value-dc1e135f.js";import{d as ie,e as ne,f as re,a as ue}from"./use-controllable-09911bc4.js";import{d as M,r as P,c as x,o as C,D as K,E as z,F as se,a as de,w as ve,i as pe,G as L,n as D,p as ce,e as U,f as $,g as H}from"./index-864637c1.js";function fe(t,v){return t===v}var be=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(be||{}),me=(t=>(t[t.Single=0]="Single",t[t.Multi=1]="Multi",t))(me||{}),xe=(t=>(t[t.Pointer=0]="Pointer",t[t.Other=1]="Other",t))(xe||{});function ge(t){requestAnimationFrame(()=>requestAnimationFrame(t))}let _=Symbol("ListboxContext");function E(t){let v=pe(_,null);if(v===null){let h=new Error(`<${t} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(h,E),h}return v}let we=M({name:"Listbox",emits:{"update:modelValue":t=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>fe},horizontal:{type:[Boolean],default:!1},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},multiple:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(t,{slots:v,attrs:h,emit:O}){let e=P(1),s=P(null),f=P(null),b=P(null),d=P([]),a=P(""),l=P(null),y=P(1);function S(o=i=>i){let i=l.value!==null?d.value[l.value]:null,n=oe(o(d.value.slice()),m=>c(m.dataRef.domRef)),u=i?n.indexOf(i):null;return u===-1&&(u=null),{options:n,activeOptionIndex:u}}let w=x(()=>t.multiple?1:0),[R,I]=ie(x(()=>t.modelValue===void 0?T(w.value,{[1]:[],[0]:void 0}):t.modelValue),o=>O("update:modelValue",o),x(()=>t.defaultValue)),k={listboxState:e,value:R,mode:w,compare(o,i){if(typeof t.by=="string"){let n=t.by;return(o==null?void 0:o[n])===(i==null?void 0:i[n])}return t.by(o,i)},orientation:x(()=>t.horizontal?"horizontal":"vertical"),labelRef:s,buttonRef:f,optionsRef:b,disabled:x(()=>t.disabled),options:d,searchQuery:a,activeOptionIndex:l,activationTrigger:y,closeListbox(){t.disabled||e.value!==1&&(e.value=1,l.value=null)},openListbox(){t.disabled||e.value!==0&&(e.value=0)},goToOption(o,i,n){if(t.disabled||e.value===1)return;let u=S(),m=J(o===g.Specific?{focus:g.Specific,id:i}:{focus:o},{resolveItems:()=>u.options,resolveActiveIndex:()=>u.activeOptionIndex,resolveId:B=>B.id,resolveDisabled:B=>B.dataRef.disabled});a.value="",l.value=m,y.value=n??1,d.value=u.options},search(o){if(t.disabled||e.value===1)return;let i=a.value!==""?0:1;a.value+=o.toLowerCase();let n=(l.value!==null?d.value.slice(l.value+i).concat(d.value.slice(0,l.value+i)):d.value).find(m=>m.dataRef.textValue.startsWith(a.value)&&!m.dataRef.disabled),u=n?d.value.indexOf(n):-1;u===-1||u===l.value||(l.value=u,y.value=1)},clearSearch(){t.disabled||e.value!==1&&a.value!==""&&(a.value="")},registerOption(o,i){let n=S(u=>[...u,{id:o,dataRef:i}]);d.value=n.options,l.value=n.activeOptionIndex},unregisterOption(o){let i=S(n=>{let u=n.findIndex(m=>m.id===o);return u!==-1&&n.splice(u,1),n});d.value=i.options,l.value=i.activeOptionIndex,y.value=1},select(o){t.disabled||I(T(w.value,{[0]:()=>o,[1]:()=>{let i=L(k.value.value).slice(),n=L(o),u=i.findIndex(m=>k.compare(n,L(m)));return u===-1?i.push(n):i.splice(u,1),i}}))}};X([f,b],(o,i)=>{var n;k.closeListbox(),Y(i,Z.Loose)||(o.preventDefault(),(n=c(f))==null||n.focus())},x(()=>e.value===0)),ce(_,k),ee(x(()=>T(e.value,{[0]:j.Open,[1]:j.Closed})));let r=x(()=>{var o;return(o=c(f))==null?void 0:o.closest("form")});return C(()=>{K([r],()=>{if(!r.value||t.defaultValue===void 0)return;function o(){k.select(t.defaultValue)}return r.value.addEventListener("reset",o),()=>{var i;(i=r.value)==null||i.removeEventListener("reset",o)}},{immediate:!0})}),()=>{let{name:o,modelValue:i,disabled:n,form:u,...m}=t,B={open:e.value===0,disabled:n,value:R.value};return z(se,[...o!=null&&R.value!=null?ne({[o]:R.value}).map(([F,q])=>z(re,Q({features:ue.Hidden,key:F,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:u,name:F,value:q}))):[],V({ourProps:{},theirProps:{...h,...G(m,["defaultValue","onUpdate:modelValue","horizontal","multiple","by"])},slot:B,slots:v,attrs:h,name:"Listbox"})])}}}),Re=M({name:"ListboxLabel",props:{as:{type:[Object,String],default:"label"},id:{type:String,default:()=>`headlessui-listbox-label-${A()}`}},setup(t,{attrs:v,slots:h}){let O=E("ListboxLabel");function e(){var s;(s=c(O.buttonRef))==null||s.focus({preventScroll:!0})}return()=>{let s={open:O.listboxState.value===0,disabled:O.disabled.value},{id:f,...b}=t,d={id:f,ref:O.labelRef,onClick:e};return V({ourProps:d,theirProps:b,slot:s,attrs:v,slots:h,name:"ListboxLabel"})}}}),Le=M({name:"ListboxButton",props:{as:{type:[Object,String],default:"button"},id:{type:String,default:()=>`headlessui-listbox-button-${A()}`}},setup(t,{attrs:v,slots:h,expose:O}){let e=E("ListboxButton");O({el:e.buttonRef,$el:e.buttonRef});function s(a){switch(a.key){case p.Space:case p.Enter:case p.ArrowDown:a.preventDefault(),e.openListbox(),D(()=>{var l;(l=c(e.optionsRef))==null||l.focus({preventScroll:!0}),e.value.value||e.goToOption(g.First)});break;case p.ArrowUp:a.preventDefault(),e.openListbox(),D(()=>{var l;(l=c(e.optionsRef))==null||l.focus({preventScroll:!0}),e.value.value||e.goToOption(g.Last)});break}}function f(a){switch(a.key){case p.Space:a.preventDefault();break}}function b(a){e.disabled.value||(e.listboxState.value===0?(e.closeListbox(),D(()=>{var l;return(l=c(e.buttonRef))==null?void 0:l.focus({preventScroll:!0})})):(a.preventDefault(),e.openListbox(),ge(()=>{var l;return(l=c(e.optionsRef))==null?void 0:l.focus({preventScroll:!0})})))}let d=W(x(()=>({as:t.as,type:v.type})),e.buttonRef);return()=>{var a,l;let y={open:e.listboxState.value===0,disabled:e.disabled.value,value:e.value.value},{id:S,...w}=t,R={ref:e.buttonRef,id:S,type:d.value,"aria-haspopup":"listbox","aria-controls":(a=c(e.optionsRef))==null?void 0:a.id,"aria-expanded":e.disabled.value?void 0:e.listboxState.value===0,"aria-labelledby":e.labelRef.value?[(l=c(e.labelRef))==null?void 0:l.id,S].join(" "):void 0,disabled:e.disabled.value===!0?!0:void 0,onKeydown:s,onKeyup:f,onClick:b};return V({ourProps:R,theirProps:w,slot:y,attrs:v,slots:h,name:"ListboxButton"})}}}),ke=M({name:"ListboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:()=>`headlessui-listbox-options-${A()}`}},setup(t,{attrs:v,slots:h,expose:O}){let e=E("ListboxOptions"),s=P(null);O({el:e.optionsRef,$el:e.optionsRef});function f(a){switch(s.value&&clearTimeout(s.value),a.key){case p.Space:if(e.searchQuery.value!=="")return a.preventDefault(),a.stopPropagation(),e.search(a.key);case p.Enter:if(a.preventDefault(),a.stopPropagation(),e.activeOptionIndex.value!==null){let l=e.options.value[e.activeOptionIndex.value];e.select(l.dataRef.value)}e.mode.value===0&&(e.closeListbox(),D(()=>{var l;return(l=c(e.buttonRef))==null?void 0:l.focus({preventScroll:!0})}));break;case T(e.orientation.value,{vertical:p.ArrowDown,horizontal:p.ArrowRight}):return a.preventDefault(),a.stopPropagation(),e.goToOption(g.Next);case T(e.orientation.value,{vertical:p.ArrowUp,horizontal:p.ArrowLeft}):return a.preventDefault(),a.stopPropagation(),e.goToOption(g.Previous);case p.Home:case p.PageUp:return a.preventDefault(),a.stopPropagation(),e.goToOption(g.First);case p.End:case p.PageDown:return a.preventDefault(),a.stopPropagation(),e.goToOption(g.Last);case p.Escape:a.preventDefault(),a.stopPropagation(),e.closeListbox(),D(()=>{var l;return(l=c(e.buttonRef))==null?void 0:l.focus({preventScroll:!0})});break;case p.Tab:a.preventDefault(),a.stopPropagation();break;default:a.key.length===1&&(e.search(a.key),s.value=setTimeout(()=>e.clearSearch(),350));break}}let b=te(),d=x(()=>b!==null?(b.value&j.Open)===j.Open:e.listboxState.value===0);return()=>{var a,l,y,S;let w={open:e.listboxState.value===0},{id:R,...I}=t,k={"aria-activedescendant":e.activeOptionIndex.value===null||(a=e.options.value[e.activeOptionIndex.value])==null?void 0:a.id,"aria-multiselectable":e.mode.value===1?!0:void 0,"aria-labelledby":(S=(l=c(e.labelRef))==null?void 0:l.id)!=null?S:(y=c(e.buttonRef))==null?void 0:y.id,"aria-orientation":e.orientation.value,id:R,onKeydown:f,role:"listbox",tabIndex:0,ref:e.optionsRef};return V({ourProps:k,theirProps:I,slot:w,attrs:v,slots:h,features:N.RenderStrategy|N.Static,visible:d.value,name:"ListboxOptions"})}}}),Pe=M({name:"ListboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1},id:{type:String,default:()=>`headlessui-listbox.option-${A()}`}},setup(t,{slots:v,attrs:h,expose:O}){let e=E("ListboxOption"),s=P(null);O({el:s,$el:s});let f=x(()=>e.activeOptionIndex.value!==null?e.options.value[e.activeOptionIndex.value].id===t.id:!1),b=x(()=>T(e.mode.value,{[0]:()=>e.compare(L(e.value.value),L(t.value)),[1]:()=>L(e.value.value).some(r=>e.compare(L(r),L(t.value)))})),d=x(()=>T(e.mode.value,{[1]:()=>{var r;let o=L(e.value.value);return((r=e.options.value.find(i=>o.some(n=>e.compare(L(n),L(i.dataRef.value)))))==null?void 0:r.id)===t.id},[0]:()=>b.value})),a=ae(s),l=x(()=>({disabled:t.disabled,value:t.value,get textValue(){return a()},domRef:s}));C(()=>e.registerOption(t.id,l)),de(()=>e.unregisterOption(t.id)),C(()=>{K([e.listboxState,b],()=>{e.listboxState.value===0&&b.value&&T(e.mode.value,{[1]:()=>{d.value&&e.goToOption(g.Specific,t.id)},[0]:()=>{e.goToOption(g.Specific,t.id)}})},{immediate:!0})}),ve(()=>{e.listboxState.value===0&&f.value&&e.activationTrigger.value!==0&&D(()=>{var r,o;return(o=(r=c(s))==null?void 0:r.scrollIntoView)==null?void 0:o.call(r,{block:"nearest"})})});function y(r){if(t.disabled)return r.preventDefault();e.select(t.value),e.mode.value===0&&(e.closeListbox(),D(()=>{var o;return(o=c(e.buttonRef))==null?void 0:o.focus({preventScroll:!0})}))}function S(){if(t.disabled)return e.goToOption(g.Nothing);e.goToOption(g.Specific,t.id)}let w=le();function R(r){w.update(r)}function I(r){w.wasMoved(r)&&(t.disabled||f.value||e.goToOption(g.Specific,t.id,0))}function k(r){w.wasMoved(r)&&(t.disabled||f.value&&e.goToOption(g.Nothing))}return()=>{let{disabled:r}=t,o={active:f.value,selected:b.value,disabled:r},{id:i,value:n,disabled:u,...m}=t,B={id:i,ref:s,role:"option",tabIndex:r===!0?void 0:-1,"aria-disabled":r===!0?!0:void 0,"aria-selected":b.value,disabled:void 0,onClick:y,onFocus:S,onPointerenter:R,onMouseenter:R,onPointermove:I,onMousemove:I,onPointerleave:k,onMouseleave:k};return V({ourProps:B,theirProps:m,slot:o,attrs:h,slots:v,name:"ListboxOption"})}}});function Te(t,v){return U(),$("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[H("path",{"fill-rule":"evenodd",d:"M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z","clip-rule":"evenodd"})])}function Be(t,v){return U(),$("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[H("path",{"fill-rule":"evenodd",d:"M10 3a.75.75 0 01.55.24l3.25 3.5a.75.75 0 11-1.1 1.02L10 4.852 7.3 7.76a.75.75 0 01-1.1-1.02l3.25-3.5A.75.75 0 0110 3zm-3.76 9.2a.75.75 0 011.06.04l2.7 2.908 2.7-2.908a.75.75 0 111.1 1.02l-3.25 3.5a.75.75 0 01-1.1 0l-3.25-3.5a.75.75 0 01.04-1.06z","clip-rule":"evenodd"})])}export{Re as B,we as F,Pe as H,Le as K,ke as N,Be as a,Te as r};
